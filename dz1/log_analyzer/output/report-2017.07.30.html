<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <title>rbui log analysis report</title>
  <meta name="description" content="rbui log analysis report">
  <style type="text/css">
    html, body {
      background-color: black;
    }
    th {
      text-align: center;
      color: silver;
      font-style: bold;
      padding: 5px;
      cursor: pointer;
    }
    table {
      width: auto;
      border-collapse: collapse;
      margin: 1%;
      color: silver;
    }
    td {
      text-align: right;
      font-size: 1.1em;
      padding: 5px;
    }
    .report-table-body-cell-url {
      text-align: left;
      width: 20%;
    }
    .clipped {
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow:hidden !important;
      max-width: 700px;
      word-wrap: break-word;
      display:inline-block;
    }
    .url {
      cursor: pointer;
      color: #729FCF;
    }
    .alert {
      color: red;
    }
  </style>
</head>

<body>
  <table border="1" class="report-table">
  <thead>
    <tr class="report-table-header-row">
    </tr>
  </thead>
  <tbody class="report-table-body">
  </tbody>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="jquery.tablesorter.min.js"></script> 
  <script type="text/javascript">
  !function($) {
    var table = [{'url': '/api/v2/internal/html5/phantomjs/queue/?wait=1m', 'count': 2767, 'time_sum': 174081.30099999998, 'time_max': 9843.0, 'count_perc': 1.0784791378403134, 'time_perc': 9.054464213325844, 'time_med': 60.0}, {'url': '/api/v2/internal/gpmd_plan_report/queue/?wait=1m&worker=5', 'count': 1410, 'time_sum': 94425.0, 'time_max': 9853.0, 'count_perc': 0.54956833550952, 'time_perc': 4.911313153290903, 'time_med': 60.0}, {'url': '/api/v2/internal/gpmd_plan_report/queue/?wait=1m&worker=2', 'count': 1409, 'time_sum': 94345.0, 'time_max': 9826.0, 'count_perc': 0.5491785707325629, 'time_perc': 4.907152125467094, 'time_med': 60.0}, {'url': '/api/v2/internal/gpmd_plan_report/queue/?wait=1m&worker=3', 'count': 1393, 'time_sum': 93402.0, 'time_max': 9853.0, 'count_perc': 0.5429423343012492, 'time_perc': 4.858104009993931, 'time_med': 60.0}, {'url': '/api/v2/internal/gpmd_plan_report/queue/?wait=1m&worker=4', 'count': 1392, 'time_sum': 93258.82800000001, 'time_max': 9826.0, 'count_perc': 0.5425525695242921, 'time_perc': 4.850657226549051, 'time_med': 60.0}, {'url': '/api/v2/internal/gpmd_plan_report/queue/?wait=1m&worker=1', 'count': 1414, 'time_sum': 84881.0, 'time_max': 71.0, 'count_perc': 0.5511273946173484, 'time_perc': 4.414902533910355, 'time_med': 60.0}, {'url': '/export/ivi/200010-impression.csv', 'count': 1320, 'time_sum': 21334.0, 'time_max': 24.0, 'count_perc': 0.5144895055833805, 'time_perc': 1.1096420949145687, 'time_med': 16.0}, {'url': '/api/v2/group/7123018/banners', 'count': 784, 'time_sum': 10247.310999999994, 'time_max': 9811.0, 'count_perc': 0.3055755851343714, 'time_perc': 0.5329918273779458, 'time_med': 0.537}, {'url': '/api/v2/banner/26647998', 'count': 252, 'time_sum': 10096.311, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5251378873605045, 'time_med': 1.1070000000000002}, {'url': '/api/v2/banner/26619125', 'count': 252, 'time_sum': 10092.176000000001, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5249228142348614, 'time_med': 1.09}, {'url': '/api/v2/banner/26618742', 'count': 252, 'time_sum': 10088.814, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5247479470405657, 'time_med': 1.0505}, {'url': '/api/v2/banner/26598670', 'count': 252, 'time_sum': 10072.117, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5238794885208887, 'time_med': 0.975}, {'url': '/api/v2/banner/24389816', 'count': 252, 'time_sum': 10058.805999999999, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5231871455038544, 'time_med': 0.887}, {'url': '/api/v2/banner/24359968', 'count': 252, 'time_sum': 10057.250999999998, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5231062655255291, 'time_med': 0.954}, {'url': '/api/v2/banner/26594175', 'count': 252, 'time_sum': 10056.837999999998, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5230847842193886, 'time_med': 0.9185000000000001}, {'url': '/api/v2/banner/26588410', 'count': 252, 'time_sum': 10046.791, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.522562211137566, 'time_med': 0.833}, {'url': '/api/v2/banner/26585041', 'count': 252, 'time_sum': 10044.337000000005, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5224345716090709, 'time_med': 0.908}, {'url': '/api/v2/banner/24337272', 'count': 252, 'time_sum': 10043.924999999997, 'time_max': 9811.0, 'count_perc': 0.0982207237931908, 'time_perc': 0.5224131423157778, 'time_med': 0.8305}, {'url': '/campaigns/7854376/banners/?', 'count': 699, 'time_sum': 9720.0, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.5055648805929317, 'time_med': 13.0}, {'url': '/campaigns/7854473/banners/?', 'count': 699, 'time_sum': 7692.235, 'time_max': 25.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.40009504827857717, 'time_med': 11.0}, {'url': '//api/1/banners/', 'count': 48, 'time_sum': 5420.395999999998, 'time_max': 250.0, 'count_perc': 0.018708709293941105, 'time_perc': 0.2819302321508646, 'time_med': 105.146}, {'url': '/campaigns/', 'count': 1294, 'time_sum': 5240.879000000011, 'time_max': 685.0, 'count_perc': 0.5043556213824957, 'time_perc': 0.2725930417527787, 'time_med': 1.4815}, {'url': '/api/v2/internal/slots', 'count': 236, 'time_sum': 5229.889, 'time_max': 36.0, 'count_perc': 0.0919844873618771, 'time_perc': 0.2720214205554823, 'time_med': 23.0}, {'url': '/api/v2/slot/2406/groups', 'count': 47, 'time_sum': 4809.0, 'time_max': 128.0, 'count_perc': 0.018318944516984, 'time_perc': 0.2501297850587869, 'time_med': 102.0}, {'url': '/campaigns/7876636/banners/?', 'count': 699, 'time_sum': 4692.695000000002, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.2440804307956841, 'time_med': 6.191}, {'url': '/api/1/photogenic_banners/post/', 'count': 19764, 'time_sum': 4661.721000000081, 'time_max': 24.0, 'count_perc': 7.703311051780251, 'time_perc': 0.24246938484800448, 'time_med': 0.135}, {'url': '/campaigns/7854362/banners/?', 'count': 700, 'time_sum': 4475.419000000002, 'time_max': 26.0, 'count_perc': 0.2728353438699745, 'time_perc': 0.23277928727760688, 'time_med': 6.1875}, {'url': '/campaigns/7876633/banners/?', 'count': 699, 'time_sum': 4084.622999999994, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.21245287440968516, 'time_med': 5.343}, {'url': '/campaigns/7854359/banners/?', 'count': 700, 'time_sum': 3918.429000000005, 'time_max': 22.0, 'count_perc': 0.2728353438699745, 'time_perc': 0.20380865118280697, 'time_med': 5.446}, {'url': '/api/1/banners/?campaign=1392872', 'count': 56, 'time_sum': 3761.0, 'time_max': 81.0, 'count_perc': 0.021826827509597958, 'time_perc': 0.19562032056687412, 'time_med': 67.0}, {'url': '/api/1/banners/?campaign=1200302', 'count': 56, 'time_sum': 3747.0, 'time_max': 82.0, 'count_perc': 0.021826827509597958, 'time_perc': 0.19489214069770736, 'time_med': 66.0}, {'url': '/campaigns/statistic/?date1=01-06-2017&date2=30-06-2017&date_type=day&do=1', 'count': 576, 'time_sum': 3588.144000000001, 'time_max': 17.0, 'count_perc': 0.22450451152729328, 'time_perc': 0.18662958774796762, 'time_med': 5.237}, {'url': '/campaigns/7854408/banners/?', 'count': 699, 'time_sum': 3304.0500000000084, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.17185304976574903, 'time_med': 4.422}, {'url': '/campaigns/7854389/banners/?', 'count': 699, 'time_sum': 3163.8510000000015, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.16456090051736919, 'time_med': 4.124}, {'url': '/api/v2/slot/2902/groups', 'count': 189, 'time_sum': 2977.0, 'time_max': 23.0, 'count_perc': 0.07366554284489311, 'time_perc': 0.15484224789353476, 'time_med': 16.0}, {'url': '/campaigns/7854366/banners/?', 'count': 699, 'time_sum': 2790.3229999999994, 'time_max': 9.113, 'count_perc': 0.27244557909301736, 'time_perc': 0.14513264550521718, 'time_med': 3.858}, {'url': '/slots/3938/', 'count': 444, 'time_sum': 2702.2719999999995, 'time_max': 99.0, 'count_perc': 0.17305556096895522, 'time_perc': 0.14055286224378835, 'time_med': 5.803}, {'url': '/campaigns/7806980/banners/', 'count': 1374, 'time_sum': 2636.570999999993, 'time_max': 1004.0, 'count_perc': 0.5355368035390642, 'time_perc': 0.13713556613063613, 'time_med': 0.8835}, {'url': '/campaigns/7854372/banners/?', 'count': 699, 'time_sum': 2584.754, 'time_max': 7.036, 'count_perc': 0.27244557909301736, 'time_perc': 0.13444041639630686, 'time_med': 3.592}, {'url': '/upload_file/ajax/', 'count': 4387, 'time_sum': 2509.863999999994, 'time_max': 37.0, 'count_perc': 1.7098980765108258, 'time_perc': 0.1305451742247423, 'time_med': 0.095}, {'url': '/campaigns/7704673/banners/', 'count': 1398, 'time_sum': 2472.701999999999, 'time_max': 999.0, 'count_perc': 0.5448911581860347, 'time_perc': 0.12861227277488713, 'time_med': 0.781}, {'url': '/campaigns/7876648/banners/?', 'count': 699, 'time_sum': 2302.4139999999984, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.11975510894912486, 'time_med': 2.452}, {'url': '/api/1/photogenic_banners/list/?server_name=WIN7RB2', 'count': 7427, 'time_sum': 2065.481999999995, 'time_max': 92.0, 'count_perc': 2.894782998460429, 'time_perc': 0.1074316008947374, 'time_med': 0.133}, {'url': '/api/1/banners/?campaign=3098083', 'count': 162, 'time_sum': 2033.0, 'time_max': 23.0, 'count_perc': 0.06314189386705123, 'time_perc': 0.10574211957257514, 'time_med': 12.0}, {'url': '/campaigns/statistic/?date1=01-06-2017&date2=30-06-2017&date_type=day&do=1&c=7854433&c=7894082&c=7854372&c=7854358&c=7876648&c=7859612&c=7854380&c=7854359&c=7854476&c=7854362&c=7859598&c=7854352&c=7854376&c=7894070&c=7854473&c=7854456&c=7876633&c=7854458&c=7876636&c=7854365&c=7854366', 'count': 564, 'time_sum': 1988.016000000001, 'time_max': 8.575, 'count_perc': 0.21982733420380798, 'time_perc': 0.10340237362724675, 'time_med': 2.3425000000000002}, {'url': '/api/1/photogenic_banners/list/?server_name=WIN7RB3', 'count': 6134, 'time_sum': 1978.9879999999985, 'time_max': 189.0, 'count_perc': 2.3908171418548907, 'time_perc': 0.10293280163732962, 'time_med': 0.132}, {'url': '/api/1/banners/?campaign=2320799', 'count': 162, 'time_sum': 1947.0, 'time_max': 22.0, 'count_perc': 0.06314189386705123, 'time_perc': 0.10126901466197924, 'time_med': 11.0}, {'url': '/campaigns/7894082/banners/?', 'count': 699, 'time_sum': 1927.7420000000004, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.10026735123909256, 'time_med': 2.183}, {'url': '/campaigns/7854473/banners/?filter=started&direct=desc&order=ctr_cnt_tzday', 'count': 1208, 'time_sum': 1926.9240000000011, 'time_max': 854.0, 'count_perc': 0.47083585056418453, 'time_perc': 0.10022480472959414, 'time_med': 0.7975000000000001}, {'url': '/api/1/photogenic_banners/list/?server_name=WIN7RB4', 'count': 5889, 'time_sum': 1922.2450000000003, 'time_max': 110.0, 'count_perc': 2.2953247715003995, 'time_perc': 0.09998143661474901, 'time_med': 0.132}, {'url': '/api/1/photogenic_banners/list/?server_name=WIN7RB5', 'count': 5422, 'time_sum': 1911.2840000000003, 'time_max': 208.0, 'count_perc': 2.113304620661431, 'time_perc': 0.09941132379003921, 'time_med': 0.132}, {'url': '/', 'count': 1188, 'time_sum': 1907.2149999999936, 'time_max': 459.0, 'count_perc': 0.4630405550250424, 'time_perc': 0.09919968351235033, 'time_med': 0.024}, {'url': '/campaigns/7854352/banners/?filter=started&direct=desc&order=ctr_cnt_tzday', 'count': 1127, 'time_sum': 1896.5450000000046, 'time_max': 859.0, 'count_perc': 0.4392649036306589, 'time_perc': 0.09864470642635022, 'time_med': 0.771}, {'url': '/campaigns/7854352/banners/?', 'count': 699, 'time_sum': 1800.4640000000002, 'time_max': 36.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.09364725999710621, 'time_med': 2.372}, {'url': '/agency/campaigns/6465912/banners/bulk_read/', 'count': 28, 'time_sum': 1730.0, 'time_max': 74.0, 'count_perc': 0.010913413754798979, 'time_perc': 0.08998222668989424, 'time_med': 61.0}, {'url': '/campaigns/7854358/banners/?', 'count': 700, 'time_sum': 1726.6879999999996, 'time_max': 12.0, 'count_perc': 0.2728353438699745, 'time_perc': 0.08980996013798848, 'time_med': 2.3425000000000002}, {'url': '/api/1/photogenic_banners/list/?server_name=WIN7RB1', 'count': 4844, 'time_sum': 1723.8950000000095, 'time_max': 194.0, 'count_perc': 1.8880205795802234, 'time_perc': 0.08966468825409021, 'time_med': 0.132}, {'url': '/api/1/banners/?campaign=3098094', 'count': 162, 'time_sum': 1688.8120000000006, 'time_max': 26.0, 'count_perc': 0.06314189386705123, 'time_perc': 0.08783992151480562, 'time_med': 10.0}, {'url': '/accounts/login/', 'count': 6899, 'time_sum': 1669.5190000000146, 'time_max': 119.0, 'count_perc': 2.688987196227077, 'time_perc': 0.08683643764224673, 'time_med': 0.181}, {'url': '/campaigns/7894070/banners/?', 'count': 699, 'time_sum': 1655.3739999999991, 'time_max': 119.0, 'count_perc': 0.27244557909301736, 'time_perc': 0.0861007159101485, 'time_med': 2.128}, {'url': '/export/appinstall_raw/2017-06-29/', 'count': 158441, 'time_sum': 1613.3599999989808, 'time_max': 24.0, 'count_perc': 61.754721025860896, 'time_perc': 0.08391544812272604, 'time_med': 0.009}, {'url': '/api/v2/slot/4499/groups', 'count': 189, 'time_sum': 1596.2849999999994, 'time_max': 14.0, 'count_perc': 0.07366554284489311, 'time_perc': 0.08302732874663456, 'time_med': 8.118}, {'url': '/api/1/flash_banners/list/?server_name=AndreySergeevich', 'count': 2726, 'time_sum': 1593.4290000000058, 'time_max': 185.0, 'count_perc': 1.062498781985072, 'time_perc': 0.08287878005332486, 'time_med': 0.222}, {'url': '/campaigns/7854365/banners/?', 'count': 699, 'time_sum': 1586.4330000000007, 'time_max': 8.933, 'count_perc': 0.27244557909301736, 'time_perc': 0.0825148981701324, 'time_med': 2.178}, {'url': '/api/1/flash_banners/list/?server_name=AndreySemenovich', 'count': 2738, 'time_sum': 1574.6009999999897, 'time_max': 167.0, 'count_perc': 1.0671759593085572, 'time_perc': 0.08189948215499031, 'time_med': 0.133}, {'url': '/campaigns/7854458/banners/?', 'count': 699, 'time_sum': 1569.0179999999987, 'time_max': 9.828, 'count_perc': 0.27244557909301736, 'time_perc': 0.08160909442573662, 'time_med': 2.116}, {'url': '/api/1/flash_banners/list/?server_name=AndreyIlich', 'count': 2736, 'time_sum': 1523.3879999999901, 'time_max': 157.0, 'count_perc': 1.066396429754643, 'time_perc': 0.07923574818073047, 'time_med': 0.133}, {'url': '/agencies/t1_agency_check_sync/?year=2017&month=5&csv=1', 'count': 4, 'time_sum': 1497.0, 'time_max': 491.0, 'count_perc': 0.0015590591078284257, 'time_perc': 0.07786323315304722, 'time_med': 340.5}, {'url': '/api/1/flash_banners/list/?server_name=AndreyIvanovich', 'count': 2742, 'time_sum': 1492.3129999999899, 'time_max': 192.0, 'count_perc': 1.0687350184163857, 'time_perc': 0.07761944893541921, 'time_med': 0.133}, {'url': '/campaigns/7854372/banners/?filter=started&direct=desc&order=ctr_cnt_tzday', 'count': 1175, 'time_sum': 1466.7190000000005, 'time_max': 504.0, 'count_perc': 0.45797361292460004, 'time_perc': 0.0762882321088873, 'time_med': 0.773}, {'url': '/sites/278/', 'count': 128, 'time_sum': 1459.5470000000003, 'time_max': 65.0, 'count_perc': 0.04988989145050962, 'time_perc': 0.0759151959644827, 'time_med': 1.4}, {'url': '/campaigns/7854366/banners/?filter=started&direct=desc&order=ctr_cnt_tzday', 'count': 1154, 'time_sum': 1456.6579999999994, 'time_max': 504.0, 'count_perc': 0.4497885526085008, 'time_perc': 0.07576493084719532, 'time_med': 0.785}, {'url': '/api/1/flash_banners/list/?server_name=AndreyVadimovich', 'count': 2740, 'time_sum': 1443.7589999999923, 'time_max': 206.0, 'count_perc': 1.0679554888624714, 'time_perc': 0.07509401712345337, 'time_med': 0.133}, {'url': '/api/1/flash_banners/list/?server_name=AndreyPetrovich', 'count': 2731, 'time_sum': 1437.3409999999906, 'time_max': 206.0, 'count_perc': 1.0644476058698575, 'time_perc': 0.07476019866628811, 'time_med': 0.133}, {'url': '/api/1/banners/?campaign=3431890', 'count': 106, 'time_sum': 1429.0, 'time_max': 23.0, 'count_perc': 0.04131506635745328, 'time_perc': 0.0743263595028086, 'time_med': 13.0}, {'url': '/api/1/flash_banners/list/?server_name=AndreyEfimovich', 'count': 2737, 'time_sum': 1381.6349999999945, 'time_max': 181.0, 'count_perc': 1.0667861945316002, 'time_perc': 0.07186277096687371, 'time_med': 0.133}, {'url': '/api/1/flash_banners/list/?server_name=AndreyKuzmich', 'count': 2730, 'time_sum': 1342.4649999999922, 'time_max': 213.0, 'count_perc': 1.0640578410929005, 'time_perc': 0.06982542771864056, 'time_med': 0.132}, {'url': '/campaigns/7854376/banners/?filter=started&direct=desc&order=ctr_cnt_tzday', 'count': 972, 'time_sum': 1333.3690000000004, 'time_max': 503.0, 'count_perc': 0.3788513632023074, 'time_perc': 0.06935231885507377, 'time_med': 0.801}, {'url': '/api/1/flash_banners/list/?server_name=AndreyLvovich', 'count': 2739, 'time_sum': 1318.1499999999928, 'time_max': 134.0, 'count_perc': 1.0675657240855145, 'time_perc': 0.06856073532444129, 'time_med': 0.133}, {'url': '/api/v2/banner/21456892', 'count': 6894, 'time_sum': 1302.9599999999946, 'time_max': 5.738, 'count_perc': 2.6870383723422915, 'time_perc': 0.06777066016639544, 'time_med': 0.161}];
    var reportDates;
    var columns = new Array();
    var lastRow = 150;
    var $table = $(".report-table-body");
    var $header = $(".report-table-header-row");
    var $selector = $(".report-date-selector");

    $(document).ready(function() {
      $(window).bind("scroll", bindScroll);
        var row = table[0];
        for (k in row) {
          columns.push(k);
        }
        columns = columns.sort();
        columns = columns.slice(columns.length -1, columns.length).concat(columns.slice(0, columns.length -1));
        drawColumns();
        drawRows(table.slice(0, lastRow));
        $(".report-table").tablesorter(); 
    });

    function drawColumns() {
      for (var i = 0; i < columns.length; i++) {
        var $th = $("<th></th>").text(columns[i])
                                .addClass("report-table-header-cell")
        $header.append($th);
      }
    }

    function drawRows(rows) {
      for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        var $row = $("<tr></tr>").addClass("report-table-body-row");
        for (var j = 0; j < columns.length; j++) {
          var columnName = columns[j];
          var $cell = $("<td></td>").addClass("report-table-body-cell");
          if (columnName == "url") {
            var url = "https://rb.mail.ru" + row[columnName];
            var $link = $("<a></a>").attr("href", url)
                                    .attr("title", url)
                                    .attr("target", "_blank")
                                    .addClass("clipped")
                                    .addClass("url")
                                    .text(row[columnName]);
            $cell.addClass("report-table-body-cell-url");
            $cell.append($link);
          }
          else {
            $cell.text(row[columnName]);
            if (columnName == "time_avg" && row[columnName] > 0.9) {
              $cell.addClass("alert");
            }
          }
          $row.append($cell);
        }
        $table.append($row);
      }
      $(".report-table").trigger("update"); 
    }

    function bindScroll() {
      if($(window).scrollTop() == $(document).height() - $(window).height()) {
        if (lastRow < 1000) {
          drawRows(table.slice(lastRow, lastRow + 50));
          lastRow += 50;
        }
      }
    }

  }(window.jQuery)
  </script>
</body>
</html>
